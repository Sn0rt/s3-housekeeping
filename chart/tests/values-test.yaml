# Basic test configuration
# Used to verify if Helm chart works correctly

cronJob:
  # Execute every minute, for testing only
  schedule: "*/1 * * * *"
  successfulJobsHistoryLimit: 2
  failedJobsHistoryLimit: 2
  concurrencyPolicy: Forbid
  activeDeadlineSeconds: 300  # 5 minutes timeout
  restartPolicy: OnFailure

image:
  repository: amazonlinux
  tag: "2023.4.20240319.1"
  pullPolicy: IfNotPresent

resources:
  limits:
    cpu: 200m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 128Mi

# S3 bucket configuration
s3:
  buckets:
    - name: "test-bucket"
      lifecycleConfigName: "test-bucket-lifecycle"
      accessKeyId:
        secretName: "test-aws-credentials"
        secretKey: "AWS_ACCESS_KEY_ID"
      secretAccessKey:
        secretName: "test-aws-credentials"
        secretKey: "AWS_SECRET_ACCESS_KEY"
      endpoint: "https://s3.amazonaws.com"

# Environment variable configuration
envs:
  ACTIVE_CLUSTER: "test"
  CURRENT_CLUSTER: "test"
  IS_ACTIVE: "true"

# S3 lifecycle configurations for testing
s3LifecycleConfigs:
  - name: "test-bucket-lifecycle"
    content: |
      {
        "Rules": [
          {
            "ID": "test-lifecycle",
            "Status": "Enabled",
            "Filter": {"Prefix": ""},
            "Transitions": [
              {"Days": 30, "StorageClass": "STANDARD_IA"},
              {"Days": 90, "StorageClass": "GLACIER"}
            ],
            "Expiration": {"Days": 365}
          }
        ]
      }